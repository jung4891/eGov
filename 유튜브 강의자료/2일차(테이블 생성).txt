2일차

​

오늘은 댓글형 게시판에 필요한 테이블을 설계해 보도록 하겠습니다.

​

1) 마리아디비10.3 다운로드 및 설치

- https://downloads.mariadb.org/mariadb/10.3.11/ 이동
- mariadb-10.3.11-winx64.msi 클릭 후 저장
- 다운로드 파일 실행하여 설치 (비번 1234, 설치시 HeidiSQL이 생김.)

- jdbc 다운로드 (따로 안함)
https://downloads.mariadb.org/connector-java/

- 마리아디비 전자정부프레임워크 연결 참조 (역시 따로 안함)
https://hanazuou.tistory.com/159

- maven 설정 참조 사이트 (따로 안함)
https://mvnrepository.com/

​

먼저 테이블목록을 살펴보면

0. 사용자 : tb_usr

- 아이디, 이름, 비밀번호

- user_id(pk,30), user_name(50), password(20), use_yn(1)

1. 게시판메인 : tb_board

- 게시아이디, 제목, 내용, 조회수, 등록자, 등록일자

- idx(pk), title(100), contents(4000), count, writer(30), indate

** 동영상은 indate오류나서 기본값 NULL로 함. 나는 current_timestamp              ////

2. 게시판댓글 : tb_reply

- 게시아이디, 순번, 댓글, 등록자, 등록일자

- idx(pk), seq(pk), reply(1000), writer(30), indate

3. 게시판파일 : tb_attach

- 게시아이디, 순번, 파일명, 등록자, 등록일자

- idx(pk), seq(pk), filename(256), writer(30), indate

​

샘플 프로젝트는 가장 간단하게 만들것이기 때문에 테이블은 이정도로 설계하지요.

나중에 필요해지는 테이블이나 컬럼이 있으면 수시로 변경하기로 하겠습니다.

​

4. 그럼 이젠 테이블을 생성해 볼까요. (쿼리문은 페이지 제일 아랫부분 확인)

1) 마리아디비 실행

2) 계정 생성 (계정은 데이터베이스를 말함)

3) 계정으로 로그인

4) 테이블 생성

5) 테이블 확인

select * from tb_user;

select * from tb_board;

select * from tb_reply;

select * from tb_attach;

모두 조회가 잘 되시나요? 그렇다면 오늘 할일은 마무리 되었네요.

​

5. 마무리

- 테이블생성까지 마쳤으니 내일부터는 화면설계를 해보도록 하겠습니다.

- 사용자관리 화면은 별도로 만들지 않겠습니다. (그래서 관리자와 사용자 user데이터를 insert하는것임. 간편하게) 

- 만들어보고 싶은 분은 프로젝트가 완료되면 게시판을 응용해서 만드시면 될거에요.

- 테이블은 테스트로 얼마든지 만드셔도 되니 마리아디비 사용법도 익혀두세요.

- 나중에 실전에서 많이 써먹을 수 있답니다.

- 오늘도 고생하셨습니다. 감사합니다.

​

유튜브 동영상 : 전자정부프레임워크와 마리아디비를 이용한 게시판 만들기 - 2일차



================= 쿼리문 =====================

// 영상은 테이블명 test

// 데이터베이스 데이터셋 조합 설정
   데이터베이스 데이터셋 기본값이 UTF-8이 아니면 한글을 못넣음 (근데 Heidi에서 새로운 데이터베이스 생성시 조합 설정되게 되어있음)
   이때는 HeidiSQL에서 db(sendmail) 우클릭 > 편집 > 조합을 utf8_general_ci로 설정해야함
   그럼 테이블 생성시 컬럼 타입을 VARCHAR로 선택시 조합에 utf8_general_ci이 자동으로 생김. 안생기면 꼭 설정해줘야 한글 들어감!!

// 테이블단위 데이터넷 조합 설정
   강의 영상에선 테이블 CREATE 쿼리가 COLLATE='latin1_swedish_ci'로 설정되어 있었음. 
   테이블 선택후 옵션 > 기본 조합에서 위부분 설정 및 변경 가능함!! > 데이터 변환 체크해야 현재 컬럼들의 조합이 변경됨


CREATE DATABASE `sendmail` /*!40100 COLLATE 'utf8_general_ci' */;

----

CREATE TABLE `tb_user` (
	`user_id` VARCHAR(30) NOT NULL COMMENT '아이디' COLLATE 'utf8_unicode_ci',
	`user_name` VARCHAR(50) NULL DEFAULT NULL COMMENT '이름' COLLATE 'utf8_unicode_ci',
	`password` VARCHAR(20) NULL DEFAULT NULL COMMENT '비밀번호' COLLATE 'utf8_unicode_ci',
	`use_yn` VARCHAR(1) NULL DEFAULT NULL COMMENT '사용여부' COLLATE 'utf8_unicode_ci',
	PRIMARY KEY (`user_id`) USING BTREE
)
COMMENT='사용자'
COLLATE='utf8_general_ci'
ENGINE=InnoDB
;
 
INSERT INTO tb_user VALUES('admin','관리자','1234','Y');
INSERT INTO tb_user VALUES('guest','사용자','1234','Y');
INSERT INTO tb_user VALUES('guest2','사용자2','1234','Y');
-----

CREATE TABLE `tb_board` (
	`idx` INT(11) NOT NULL AUTO_INCREMENT COMMENT '게시물아이디',
	`title` VARCHAR(100) NULL DEFAULT NULL COMMENT '제목' COLLATE 'utf8_general_ci',
	`contents` VARCHAR(4000) NULL DEFAULT NULL COMMENT '내용' COLLATE 'utf8_general_ci',
	`count` INT(11) NULL DEFAULT NULL COMMENT '조회수',
	`writer` VARCHAR(30) NULL DEFAULT NULL COMMENT '작성자' COLLATE 'utf8_general_ci',
	`indate` DATETIME NULL DEFAULT current_timestamp(),
	PRIMARY KEY (`idx`) USING BTREE
)
COMMENT='게시판메인'
COLLATE='utf8_general_ci'
ENGINE=InnoDB
;

----

CREATE TABLE `tb_reply` (
	`idx` INT(11) NOT NULL COMMENT '게시물아이디',
	`seq` INT(11) NOT NULL COMMENT '순번',
	`reply` VARCHAR(1000) NULL DEFAULT NULL COMMENT '댓글' COLLATE 'utf8_general_ci',
	`writer` VARCHAR(30) NULL DEFAULT NULL COMMENT '작성자' COLLATE 'utf8_general_ci',
	`indate` DATETIME NULL DEFAULT current_timestamp() COMMENT '작성일',
	PRIMARY KEY (`idx`, `seq`) USING BTREE
)
COMMENT='게시판댓글'
COLLATE='utf8_general_ci'
ENGINE=InnoDB
;


----

CREATE TABLE `tb_attach` (
	`idx` INT(11) NOT NULL COMMENT '게시물아이디',
	`seq` INT(11) NOT NULL COMMENT '순번',
	`filename` VARCHAR(256) NULL DEFAULT NULL COMMENT '파일명' COLLATE 'utf8_general_ci',
	`writer` VARCHAR(30) NULL DEFAULT NULL COMMENT '작성자' COLLATE 'utf8_general_ci',
	`indate` DATETIME NULL DEFAULT NULL COMMENT '작성일',
	PRIMARY KEY (`idx`, `seq`) USING BTREE
)
COMMENT='게시판파일'
COLLATE='utf8_general_ci'
ENGINE=InnoDB
;